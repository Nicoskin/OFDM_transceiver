#include "../ofdm_mod.h"
#include "../fft/fft.h"
#include <iostream>

// g++ --std c++20 test.cpp ../ofdm_mod.cpp ../fft/fft.cpp -o test && ./test

int main() {
    // Создание объекта OFDM
    OFDM ofdm;

    // Пример входных данных (комплексные значения квадратур)
    std::vector<std::vector<std::complex<double>>> input_matrix = {
        {{-0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, -0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, -0.707}, {-0.707, 0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {-0.707, 0.707}, {0.707, -0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, -0.707}, {-0.707, 0.707}, {0.707, 0.707}, {0.707, 0.707}, {0.707, -0.707}, {-0.707, -0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}, {0.707, -0.707}, {0.707, 0.707}}};

    auto PSS = ofdm.ZadoffChu(true);
    auto mapped_pss = ofdm.mapPSS(PSS);

    // Обработка входных данных
    std::vector<std::complex<double>> output = ofdm.process(input_matrix);

    // Печать выходных данных
    // for (const auto &val : output) {
    //     std::cout << val << ",\n";
    // }

    return 0;
}
